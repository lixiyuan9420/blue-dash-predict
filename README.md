# blue-dash-predict
predict server for blue dash server

## 根目录

app.py:

主文件，也是程序进入和开始的地方。在根目录下运行`run flask`以启动程序。用`run 
flask --port [端口号]`命令可以指定端口。在多个终端内运行不同端口可以开启多个实例
（不推荐，因为目前logger还不支持同步写入日志，可能造成日志写入混乱）。

biz_logic.py：

相当于控制器controller，负责把不同url上的请求根据method
（例如是Get还是Post）导到不同的函数上。每个函数调用封装好的类或函数来执行业务逻辑；
为了可读性，业务逻辑中的具体操作应该在封装的类中实现。


config.py: 

flask app的配置文件，目前为空。

## 目前的功能

这里只包含对功能的描述，具体的接口请查找下方的API板块。

### 1 单月收入预测

#### 1.1 查询指定某年某月，某人的收入预测

#### 1.2 查询指定某年某月，某大区的收入预测

这一过程需要几秒钟时间，请勿重复请求，这可能会使后台繁忙。

## 2 三月收入预测

#### 2.1 查询指定某年某月，某人填写的收入预测

## TODO

1. 前期预测数据的填入
2. 某一大区当月收入预测和实际收入比较


## API

所有API都有身份验证。目前是使用的token。


### 1 单月收入预测

#### 1.1 插入单月收入预测

url: /predict/new_one_month

method: POST

JSON结构体例子：
    
    {

        "单月销量预测": {
            '预算制定流水号':"xxx"
            '预算填写人':"xxx"
            '预算期间':"xxx"
            '预算部门':"xxx"
            '预测销售总金额':1000.00
            '预计新增门店数':30
            '线下渠道预估轻饮酒总销量（瓶）':50
            '线下渠道预估蓝气罐总销量（箱）':50
            '销售预测':"xxx"
            '大区':"xxx"
            '省份':"xxx"
            '区域':"xxx"
            '电商平台':"xxx"
            '备注':"xxx"
        }
        "token": "abcdefg123"
    }

### 2.三月收入预测

#### 2.1 插入新的三月收入预测

url: /predict/new_three_month

method: POST

JSON结构体例子:
    
    {
        
    "单月销量预测": {

        '预算制定流水号':"xxx"
        '预算填写人':"xxx"
        '预算期间':"xxx"
        '预算截止期':"xxx"
        '预算部门':"xxx"
        '预测销售总金额':1000.00
        '预计新增门店数':30
        '线下渠道预估轻饮酒总销量（瓶）':50
        '线下渠道预估蓝气罐总销量（箱）':50
        '预测销售总金额-二月':1000.00
        '预计新增门店数-二月':30
        '线下渠道预估轻饮酒总销量（瓶）-二月':50
        '线下渠道预估蓝气罐总销量（箱）-二月':50
        '预测销售总金额-三月':1000.00
        '预计新增门店数-三月':30
        '线下渠道预估轻饮酒总销量（瓶）-三月':50
        '线下渠道预估蓝气罐总销量（箱）-三月':50
        '销售预测':"xxx"
        '大区-第一月线下':"xxx"
        '省份-第一月线下':"xxx"
        '区域-第一月线下':"xxx"
        '大区-第二月线下':"xxx"
        '省份-第二月线下':"xxx"
        '区域-第二月线下':"xxx"
        '大区-第三月线下':"xxx"
        '省份-第三月线下':"xxx"
        '区域-第三月线下':"xxx"
        '电商平台':"xxx"
        '备注':"xxx"
        '预测销售总金额（三个月）':1000.00}
        "token": "abcdefg123"
    }



